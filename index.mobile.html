<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Teluge Agro - Banana Suplayer</title>
  <link rel="icon" href="logo Teluge.jpg" type="image/x-icon">
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap');
    body {
      font-family: 'Quicksand', sans-serif;
      background: linear-gradient(135deg, #86efac, #4ade80);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 1rem;
    }
    .container {
      background: white;
      border-radius: 1rem;
      box-shadow: 0 25px 40px rgba(0,0,0,0.1);
      width: 95%;
      max-width: 380px; /* Optimized for mobile portrait */
      min-height: 600px; /* Height for portrait */
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1.5rem 1rem;
      margin: 0 auto;
    }

    /* Mobile-first styles */
    .avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 4px solid #34d399;
      overflow: hidden;
      margin-bottom: 1rem;
      box-shadow: 0 4px 8px rgb(56 189 138 / 0.35);
      transition: transform 0.3s ease;
      cursor: pointer;
      background-color: #3b82f6;
      color: white;
      font-weight: bold;
      font-size: 48px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .avatar:hover {
      transform: scale(1.1);
      box-shadow: 0 10px 15px rgb(52 211 153 / 0.6);
    }
    h1 {
      font-weight: 700;
      margin-bottom: 0.25rem;
      font-size: 1.5rem;
    }
    p.desc {
      font-weight: 500;
      color: #065f46;
      font-size: 0.9rem;
      text-align: center;
      margin-bottom: 1.5rem;
      line-height: 1.4;
    }
    .links {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    button.link-btn {
      cursor: pointer;
      display: flex;
      align-items: center;
      background: #22c55e;
      color: white;
      font-weight: 600;
      padding: 0.75rem 1.25rem;
      border-radius: 9999px;
      border: none;
      font-size: 1rem;
      box-shadow: 0 6px 10px rgb(34 197 94 / 0.3);
      transition:
        background-color 0.3s ease,
        box-shadow 0.3s ease,
        transform 0.3s ease;
    }
    button.link-btn:hover, button.link-btn:focus {
      background-color: #16a34a;
      box-shadow: 0 12px 20px rgb(22 163 74 / 0.6);
      transform: translateY(-2px);
      outline: none;
    }
    button.link-btn img {
      width: 24px;
      height: 24px;
      border-radius: 0.375rem;
      margin-right: 1rem;
      filter: drop-shadow(0 2px 2px rgba(0,0,0,0.15));
      transition: transform 0.3s ease;
    }
    button.link-btn:hover img {
      transform: scale(1.15);
    }
    footer {
      margin-top: 2.5rem;
      font-size: 0.85rem;
      color: #065f46cc;
      user-select: none;
    }
    /* Share button on top right */
    .share-btn {
      position: fixed;
      top: 0.5rem;
      right: 0.5rem;
      background: white;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background-color 0.3s ease;
      border: 2px solid transparent;
    }
    .share-btn:hover {
      background-color: #4ade80;
      border-color: #22c55e;
    }
    .share-btn svg {
      width: 20px;
      height: 20px;
      stroke: #065f46;
      stroke-width: 2.3;
      stroke-linecap: round;
      stroke-linejoin: round;
      transition: stroke 0.3s ease;
    }
    .share-btn:hover svg {
      stroke: white;
    }
    /* Interactive alert popup - Appears at top of content container */
    .toast {
      position: absolute;
      top: 0.5rem;
      left: 50%;
      transform: translateX(-50%);
      background: #4ade80;
      color: white;
      padding: 0.75rem 1rem;
      border-radius: 1rem;
      box-shadow: 0 8px 25px rgba(34,197,94,0.8);
      font-weight: 600;
      opacity: 0;
      pointer-events: none;
      transition: all 0.4s ease;
      z-index: 100; /* High z-index but within container context */
      max-width: 95%;
      text-align: center;
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255,255,255,0.2);
    }
    .toast.show {
      opacity: 1;
      pointer-events: auto;
      transform: translateX(-50%) translateY(0);
      animation: toastSlideIn 0.4s ease;
    }

    @keyframes toastSlideIn {
      0% {
        transform: translateX(-50%) translateY(-100%);
        opacity: 0;
      }
      100% {
        transform: translateX(-50%) translateY(0);
        opacity: 1;
      }
    }

    .drag-handle {
      flex-shrink: 0;
      width: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Circular plus button */
    #addServiceBtnOutside {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background-color: #357a38;
      color: white;
      font-size: 28px;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    #addServiceBtnOutside:hover {
      background-color: #2c5d2e;
    }

    /* ✅ Pastikan viewport sesuai */
    @media screen and (max-width: 768px) {
      /* Tombol edit & hapus selalu di atas elemen lain */
      .btn-edit,
      .btn-delete {
        position: relative;
        z-index: 50 !important;
      }

      /* Kalau ada overlay admin panel yang nutupin tombol */
      .overlay,
      .sidebar-bg {
        pointer-events: none !important;
      }

      /* Sidebar / menu admin biar ga nutup tombol */
      .sidebar {
        z-index: 40 !important;
      }
    }
  </style>
</head>
<body>
  <!-- Loading overlay -->
  <div id="loadingOverlay" class="fixed inset-0 bg-white bg-opacity-90 flex justify-center items-center z-50">
    <div class="text-center">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"></div>
      <p class="text-green-700 font-semibold">Memuat konten...</p>
    </div>
  </div>

  <button aria-label="Bagikan Profil" title="Bagikan Profil" class="share-btn" id="shareBtn">
    <svg fill="none" viewBox="0 0 24 24" aria-hidden="true" >
      <path d="M4 12v1a3 3 0 003 3h10M16 8l5-5m0 0l-5-5m5 5H9" />
    </svg>
  </button>

  <main role="main" class="container" aria-label="Profil bio TeluGe Agro" style="display: none;">
    <div class="avatar" tabindex="0" aria-label="Logo perusahaan TeluGe Agro">
      <img src="logo Teluge.jpg" alt="Logo Teluge Agro" style="width: 100%; height: 100%; object-fit: contain; border-radius: 50%;" />
    </div>

    <h1>@telugeagro</h1>
    <p class="desc">Supplier Pisang Dan Spesialis - Good Bananas Supplier & Specialist Until Export, Purworejo Central Java ID</p>

    <nav class="links" aria-label="Tautan Aplikasi dan Media Sosial">
      <button class="link-btn" onclick="openLink('https://www.tokopedia.com/telugeagro')" aria-label="Buka Tokopedia TeluGe Agro">
        <img src="Logo Tokopedia (1).png" alt="Logo hijau Tokopedia berbentuk burung hantu" onerror="this.onerror=null; this.src='https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/d597cd25-28d1-487d-abd7-4e7cc6d246f0.png';"/>
        Tokopedia
      </button>
      <button class="link-btn" onclick="openLink('https://shopee.co.id/t3luge_agro?is_from_login=true')" aria-label="Buka Shopee TeluGe Agro">
        <img src="/Logo Shopee.png " alt="Logo oranye Shopee berupa tas belanja" onerror="this.onerror=null; this.src='https://placehold.co/28x28/png?text=Error';"/>
        Shopee
      </button>
      <button class="link-btn" onclick="openLink('https://www.instagram.com/teluge_agro?igsh=cXR3YWtxaDNnYjJw')" aria-label="Buka Instagram TeluGe Agro">
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Logo Instagram berwarna gradasi merah, ungu, dan oranye membentuk kamera" onerror="this.onerror=null; this.src='https://placehold.co/28x28/png?text=Error';"/>
        Instagram
      </button>
      <button class="link-btn" onclick="openLink('https://wa.me/628112638318?text=Halo%20Teluge%20Agro%2C%20saya%20tertarik%20dengan%20produk%20pisang%20Anda%21')" aria-label="Hubungi WhatsApp TeluGe Agro">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="Logo WhatsApp berwarna hijau" onerror="this.onerror=null; this.src='https://placehold.co/28x28/png?text=Error';"/>
        WhatsApp
      </button>
      <button class="link-btn" onclick="openLink('https://www.facebook.com/TelugeAgro?rdid=ba1ZrBdIXWKmtGmH&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F1CPJqr4wzQ%2F%23')" aria-label="Buka Facebook TeluGe Agro">
        <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" alt="Logo Facebook berwarna biru" onerror="this.onerror=null; this.src='https://placehold.co/28x28/png?text=Error';"/>
        Facebook
      </button>
      <button class="link-btn" onclick="openLink('https://www.google.com/maps/place/Teluge+Agro+-+Supplier+Pisang+dan+Spesialis/@-7.7408703,109.9370574,692m/data=!3m2!1e3!4b1!4m6!3m5!1s0x2e7ac390dce0a6eb:0xf0cb3eb8af2c7312!8m2!3d-7.7408703!4d109.9370574!16s%2Fg%2F11hfg1m849?entry=ttu&g_ep=EgoyMDI5MDgyNS4wIKXMDSoASAFQAw%3D%3D')" aria-label="Buka Google Maps TeluGe Agro">
        <img src="Logo Maps.png" alt="Logo Google Maps berwarna merah" onerror="this.onerror=null; this.src='https://placehold.co/28x28/png?text=Error';"/>
        Google Maps
      </button>
    </nav>

  <!-- Circular Plus Button Outside Admin Panel for Mobile -->
  <button id="addServiceBtnOutside" aria-label="Tambah Layanan" title="Tambah Layanan" style="display:none; position: fixed; bottom: 20px; right: 20px; width: 50px; height: 50px; border-radius: 50%; background-color: #357a38; color: white; font-size: 28px; border: none; cursor: pointer; box-shadow: 0 4px 8px rgba(0,0,0,0.2); z-index: 1000;">
    +
  </button>

  </main>
  <!-- Admin Dropdown Menu for Mobile -->
  <div id="adminMenuMobile" class="hidden absolute w-60 bg-white rounded-xl shadow-xl border border-gray-200 z-50 admin-menu-mobile">

    <div class="p-4 border-b border-gray-100">
      <p class="text-sm font-semibold text-gray-800">TelugeAgro_Admin</p>
      <p class="text-xs text-gray-400">Admin Panel</p>
    </div>
    <!-- Items -->
    <div class="flex flex-col">
      <button onclick="manageWeb()" 
        class="flex items-center gap-2 px-4 py-3 text-gray-700 hover:bg-green-50 hover:text-green-600 transition">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 3a.75.75 0 01.75.75V6a.75.75 0 01-.75.75H6a.75.75 0 01-.75-.75V3.75A.75.75 0 016 3h3.75zM18 3.75A.75.75 0 0017.25 3H13.5a.75.75 0 00-.75.75V6a.75.75 0 00.75.75h3.75A.75.75 0 0018 6V3.75zM9.75 13.5a.75.75 0 01.75.75V18a.75.75 0 01-.75.75H6a.75.75 0 01-.75-.75v-3.75A.75.75 0 016 13.5h3.75zM18 13.5a.75.75 0 00-.75.75V18a.75.75 0 00.75.75h3.75a.75.75 0 00.75-.75v-3.75a.75.75 0 00-.75-.75H18z" />
        </svg>
        Manage Web
      </button>
      <button id="addServiceBtnMobile" 
        style="display:none"
        class="flex items-center justify-center gap-2 px-4 py-3 text-white bg-blue-600 rounded-full hover:bg-blue-700 transition w-12 h-12 mx-auto">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.5v15m7.5-7.5h-15" />
        </svg>
      </button>
      <button onclick="logoutAdmin()" 
        class="flex items-center gap-2 px-4 py-3 text-red-600 hover:bg-red-50 transition">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-9A2.25 2.25 0 002.25 5.25v13.5A2.25 2.25 0 004.5 21h9a2.25 2.25 0 002.25-2.25V15M12 9l3-3m0 0l3 3m-3-3v12" />
        </svg>
        Logout
      </button>
    </div>
  </div>

<div id="adminMenu" class="hidden absolute w-60 bg-white rounded-xl shadow-xl border border-gray-200 z-50">

    <div class="p-4 border-b border-gray-100">
      <p class="text-sm font-semibold text-gray-800">TelugeAgro_Admin</p>
      <p class="text-xs text-gray-400">Admin Panel</p>
    </div>
    <!-- Items -->
    <div class="flex flex-col">
      <button onclick="manageWeb()" 
        class="flex items-center gap-2 px-4 py-3 text-gray-700 hover:bg-green-50 hover:text-green-600 transition">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 3a.75.75 0 01.75.75V6a.75.75 0 01-.75.75H6a.75.75 0 01-.75-.75V3.75A.75.75 0 016 3h3.75zM18 3.75A.75.75 0 0017.25 3H13.5a.75.75 0 00-.75.75V6a.75.75 0 00.75.75h3.75A.75.75 0 0018 6V3.75zM9.75 13.5a.75.75 0 01.75.75V18a.75.75 0 01-.75.75H6a.75.75 0 01-.75-.75v-3.75A.75.75 0 016 13.5h3.75zM18 13.5a.75.75 0 00-.75.75V18a.75.75 0 00.75.75h3.75a.75.75 0 00.75-.75v-3.75a.75.75 0 00-.75-.75H18z" />
        </svg>
        Manage Web
      </button>
      <button id="addServiceBtn" 
        style="display:none"
        class="flex items-center justify-center gap-2 px-4 py-3 text-white bg-blue-600 rounded-full hover:bg-blue-700 transition w-12 h-12 mx-auto">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.5v15m7.5-7.5h-15" />
        </svg>
      </button>
      <button onclick="logoutAdmin()" 
        class="flex items-center gap-2 px-4 py-3 text-red-600 hover:bg-red-50 transition">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-9A2.25 2.25 0 002.25 5.25v13.5A2.25 2.25 0 004.5 21h9a2.25 2.25 0 002.25-2.25V15M12 9l3-3m0 0l3 3m-3-3v12" />
        </svg>
        Logout
      </button>
    </div>
  </div>
    <footer class="bg-gray-800 text-white py-4 text-center">
    <p>© 2023 Teluge Agro. All rights reserved.</p>
  </footer>

<script>
  function manageWeb() {
    showToast("Mode editing diaktifkan");
    toggleEditingMode();
    hideAdminMenu();
  }

    function logoutAdmin() {
      localStorage.removeItem('adminLoggedIn');
      showToast("Logout berhasil");
      hideAdminMenu();
      
      // Reset login state and show login modal if account button is clicked again
      const accountBtn = document.getElementById('accountBtn');
      const avatar = document.querySelector('.avatar');
      
      // Update event listeners to show login modal instead of admin menu
      accountBtn.onclick = showLoginModal;
      if (avatar) {
        avatar.onclick = showLoginModal;
      }
    }


</script>

  <!-- Admin Account Button for Mobile -->
  <div id="adminControlsMobile" class="admin-controls-mobile" style="display:none;">
    <button id="accountBtnMobile" aria-label="Account Menu" title="Account Menu" class="share-btn" style="top: 1rem; right: 1rem; position: fixed; z-index: 1000;">
      <svg fill="none" viewBox="0 0 24 24" aria-hidden="true" >
        <circle cx="12" cy="7" r="4" stroke="#065f46" stroke-width="2"/>
        <path d="M5 21c0-3 6-3 7-3s7 0 7 3" stroke="#065f46" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" role="dialog" aria-modal="true" aria-labelledby="loginTitle" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
    <div class="bg-white rounded-lg p-6 w-80 max-w-full shadow-lg">
      <h2 id="loginTitle" class="text-xl font-bold mb-4 text-center text-green-700">Admin Login</h2>
      <form id="loginForm" class="flex flex-col gap-4">
        <label for="username" class="font-semibold text-green-600">Username</label>
        <input type="text" id="username" name="username" required class="border border-green-400 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" />
        <label for="password" class="font-semibold text-green-600">Password</label>
        <input type="password" id="password" name="password" required class="border border-green-400 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" />
        <button type="submit" class="bg-green-600 text-white rounded py-2 font-semibold hover:bg-green-700 transition">Login</button>
        <button type="button" id="loginCancel" class="mt-2 text-center text-green-600 hover:underline">Cancel</button>
      </form>
      <p id="loginError" class="text-red-600 mt-2 hidden" role="alert"></p>
    </div>
  </div>

  <div id="toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true"></div>

  <script>
    // Hardcoded credentials for demo
    const ADMIN_USERNAME = 'teluge@admin.app';
    const ADMIN_PASSWORD = 'teluge2025';

    const accountBtn = document.getElementById('accountBtn');
    const loginModal = document.getElementById('loginModal');
    const loginForm = document.getElementById('loginForm');
    const loginCancel = document.getElementById('loginCancel');
    const loginError = document.getElementById('loginError');

    function isLoggedIn() {
      return localStorage.getItem('adminLoggedIn') === 'true';
    }

    function showLoginModal() {
      loginError.classList.add('hidden');
      loginForm.reset();
      loginModal.classList.remove('hidden');
    }

    function hideLoginModal() {
      loginModal.classList.add('hidden');
    }


    accountBtn.addEventListener('click', () => {
      if (isLoggedIn()) {
        toggleAdminMenu();
      } else {
        showLoginModal();
      }
    });

    // Add click event to avatar for toggling admin menu
    const avatar = document.querySelector('.avatar');
    if (avatar) {
      avatar.addEventListener('click', () => {
        if (isLoggedIn()) {
          toggleAdminMenu();
        } else {
          showLoginModal();
        }
      });
    }

    loginCancel.addEventListener('click', () => {
      hideLoginModal();
    });

    loginForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const username = loginForm.username.value.trim();
      const password = loginForm.password.value.trim();

      if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
        localStorage.setItem('adminLoggedIn', 'true');
        hideLoginModal();
        showToast('Login berhasil!');
        toggleAdminMenu();
      } else {
        loginError.textContent = 'Username atau password salah.';
        loginError.classList.remove('hidden');
      }
    });

    // Admin menu UI
    let adminMenu;

    function toggleAdminMenu() {
      if (!adminMenu) {
        createAdminMenu();
      }

      // Always ensure admin menu is properly positioned
      const accountBtnRect = document.getElementById('accountBtn').getBoundingClientRect();
      const menuWidth = 200;
      const menuHeight = adminMenu.offsetHeight || 100;

      // Position menu so its top aligns with account button bottom plus margin
      let top = accountBtnRect.bottom + 6;
      let right = window.innerWidth - accountBtnRect.right;

      // Ensure menu does not overflow viewport vertically
      if (top + menuHeight > window.innerHeight - 10) {
        top = accountBtnRect.top - menuHeight - 6;
        if (top < 10) {
          top = 10;
        }
      }

      // Apply fixed positioning
      adminMenu.style.position = 'fixed';
      adminMenu.style.top = top + 'px';
      adminMenu.style.right = right + 'px';
      adminMenu.style.left = 'auto';
      adminMenu.style.zIndex = '1000';

      if (adminMenu.style.display === 'none' || adminMenu.classList.contains('minimized')) {
        // Show admin menu
        adminMenu.style.display = 'block';
        adminMenu.classList.remove('minimized');
        
        // Add click outside handler to close menu with a small delay
        setTimeout(() => {
          document.addEventListener('click', handleClickOutside);
        }, 10);
      } else {
        // Hide admin menu
        hideAdminMenu();
      }
    }

    function hideAdminMenu() {
      if (adminMenu) {
        adminMenu.style.display = 'none';
        adminMenu.classList.add('minimized');
        document.removeEventListener('click', handleClickOutside);
      }
    }

    function handleClickOutside(event) {
      if (adminMenu && adminMenu.style.display === 'block') {
        const isClickInsideMenu = adminMenu.contains(event.target);
        const isClickOnAccountBtn = event.target === accountBtn || accountBtn.contains(event.target);
        
        if (!isClickInsideMenu && !isClickOnAccountBtn) {
          hideAdminMenu();
        }
      }
    }

    let editingMode = false;

    function toggleEditingMode() {
      editingMode = !editingMode;
      const container = document.querySelector('.container');
      const linksContainer = container.querySelector('.links');
      const avatarImg = container.querySelector('.avatar img');
      const mainTitle = document.querySelector('h1');
      const desc = document.querySelector('p.desc');

      if (editingMode) {
        showToast('Mode editing diaktifkan');

        // Enable contenteditable for main title and description
        mainTitle.setAttribute('contenteditable', 'true');
        desc.setAttribute('contenteditable', 'true');

        // Enable drag and drop for links container buttons
        enableDragAndDropLinks(linksContainer);

        // Enable inline editing for link buttons text
        linksContainer.querySelectorAll('button.link-btn').forEach(btn => {
          btn.setAttribute('contenteditable', 'true');
          btn.style.outline = '1px dashed #34d399';
          
            // Add edit icon to each service button
            if (!btn.querySelector('.edit-icon')) {
              const editIcon = document.createElement('span');
              editIcon.className = 'edit-icon btn-edit';
              // Classy filled edit icon SVG
              editIcon.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" fill="#2563eb" viewBox="0 0 24 24" stroke="none" width="24" height="24" style="vertical-align: middle;">
                  <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
                </svg>
              `;
              editIcon.style.marginLeft = 'auto';
              editIcon.style.padding = '0 8px';
              editIcon.style.cursor = 'pointer';
              editIcon.style.fontSize = '20px';
              editIcon.style.minWidth = '24px';
              editIcon.style.minHeight = '24px';
              editIcon.style.display = 'flex';
              editIcon.style.alignItems = 'center';
              editIcon.style.justifyContent = 'center';
              editIcon.addEventListener('click', function(e) {
                e.stopPropagation();
                openServiceModal(btn);
              });
              btn.appendChild(editIcon);

            // Add delete icon next to edit icon
            if (!btn.querySelector('.delete-icon')) {
              const deleteIcon = document.createElement('span');
              deleteIcon.className = 'delete-icon btn-delete';
              deleteIcon.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" fill="#ef4444" viewBox="0 0 24 24" stroke="none" width="24" height="24" style="vertical-align: middle; cursor: pointer; min-width: 24px; min-height: 24px; display: flex; align-items: center; justify-content: center;">
                  <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                </svg>
              `;
              deleteIcon.style.padding = '0 8px';
              deleteIcon.title = 'Hapus layanan';
              deleteIcon.addEventListener('click', function(e) {
                e.stopPropagation();
                if (confirm('Yakin ingin menghapus layanan ini?')) {
                  btn.remove();
                }
              });
              btn.appendChild(deleteIcon);
            }
          }
        });

        // Enable URL editing on double click
        enableURLEditing(linksContainer);

        // Enable logo editing on double click for menu logos
        enableLogoEditing(linksContainer);

        // Show border for container and avatar
        container.style.border = '2px dashed #34d399';
        avatarImg.style.outline = '2px dashed #34d399';
        avatarImg.style.cursor = 'pointer';

        // Add click handler to avatar image to change logo
        avatarImg.addEventListener('click', onChangeLogoClick);

        // Add Save button
        const saveButton = document.createElement('button');
        saveButton.id = 'saveButton';
        saveButton.className = 'save-btn';
        saveButton.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
          </svg>
          Simpan Perubahan
        `;
        saveButton.onclick = function() {
          saveContent();
          showToast('Perubahan disimpan!');
        };
        
        // Position save button at the bottom of the container
        saveButton.style.position = 'fixed';
        saveButton.style.bottom = '20px';
        saveButton.style.left = '50%';
        saveButton.style.transform = 'translateX(-50%)';
        saveButton.style.zIndex = '1000';
        saveButton.style.backgroundColor = '#22c55e';
        saveButton.style.color = 'white';
        saveButton.style.padding = '12px 24px';
        saveButton.style.borderRadius = '9999px';
        saveButton.style.border = 'none';
        saveButton.style.fontWeight = '600';
        saveButton.style.boxShadow = '0 4px 12px rgba(34, 197, 94, 0.5)';
        saveButton.style.cursor = 'pointer';
        saveButton.style.display = 'flex';
        saveButton.style.alignItems = 'center';
        saveButton.style.gap = '8px';

        document.body.appendChild(saveButton);

      } else {
        showToast('Mode editing dinonaktifkan');

